<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Food Menu System</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body{
  min-height:100vh;
  background:url('https://cdn.pixabay.com/photo/2021/01/25/14/12/restaurant-5947687_1280.jpg') center/cover no-repeat;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  position:relative;
}
body::before{
  content:'';
  position:absolute;
  top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.7);
  backdrop-filter:blur(4px);
  z-index:0;
}
.container{
  width:400px;
  background:rgba(255,255,255,0.08);
  padding:30px;
  border-radius:20px;
  box-shadow:0 0 20px rgba(0,255,255,0.3);
  backdrop-filter:blur(10px);
  text-align:center;
  position:relative;
  z-index:1;
}
h2{margin-bottom:20px;color:#00eaff;}
.input-group{margin:15px 0;text-align:left;}
.input-group label{display:block;margin-bottom:6px;font-weight:600;}
.input-group input{
  width:100%;padding:10px;border:none;
  border-radius:8px;background:rgba(255,255,255,0.1);
  color:#fff;outline:none;}
button{
  width:100%;padding:10px;background:#00eaff;
  border:none;border-radius:8px;font-weight:600;
  cursor:pointer;transition:0.3s;}
button:hover{background:#00cce7;}
.signup-text{margin-top:10px;font-size:14px;}
.signup-text a{color:#00eaff;text-decoration:none;}
.signup-text a:hover{text-decoration:underline;}
.error-msg{margin-top:10px;font-size:14px;color:red;}
#menuPage,#adminDashboard{display:none;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{border:1px solid rgba(255,255,255,0.2);padding:8px;text-align:left;}
th{background:rgba(0,0,0,0.4);}
.filter-buttons button{
  width:auto;padding:8px 15px;margin:5px;
  border:none;border-radius:10px;background:#00eaff;
  color:#000;cursor:pointer;font-weight:600;
  transition:0.3s;}
.filter-buttons button:hover{background:#00bcd4;}
.menu-container{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:10px;
}
.card{
  background:rgba(255,255,255,0.1);
  padding:10px;
  border-radius:15px;
  box-shadow:0 0 15px rgba(0,255,255,0.3);
  text-align:center;
  transition:transform 0.3s, box-shadow 0.3s;
}
.card:hover{
  transform:translateY(-5px) scale(1.05);
  box-shadow:0 0 25px rgba(0,255,255,0.5);
}
.card img{
  width:100%;
  height:100px;
  object-fit:cover;
  border-radius:10px;
  margin-bottom:10px;
}
.card h4{color:#00eaff;margin-bottom:5px;}
.card p{font-size:13px;color:#fff;}
</style>
</head>
<body>

<!-- Choose Login Type -->
<div class="container" id="loginTypeBox">
  <h2>Login As</h2>
  <button id="customerBtn">Customer</button>
  <button id="adminBtn" style="margin-top:10px;">Admin</button>
</div>

<!-- Login / Signup -->
<div class="container" id="loginPage" style="display:none;">
  <h2 id="loginTitle">Login</h2>
  <div id="formArea">
      <div class="input-group" id="nameField" style="display:none;">
          <label>Full Name</label>
          <input type="text" id="fullname" placeholder="Enter your name">
      </div>
      <div class="input-group" id="emailField">
          <label>Email</label>
          <input type="email" id="email" placeholder="Enter your email">
      </div>
      <div class="input-group" id="phoneField" style="display:none;">
          <label>Phone Number</label>
          <input type="tel" id="phone" placeholder="Enter your phone number" maxlength="10">
      </div>
      <div class="input-group">
          <label>Password</label>
          <input type="password" id="password" placeholder="Enter password">
      </div>
      <div class="input-group" id="otpField" style="display:none;">
          <label>Enter OTP</label>
          <input type="text" id="otpInput" placeholder="Enter 6-digit OTP">
      </div>
      <button id="loginBtn">Login</button>
      <p class="signup-text" id="toggleSignup">Don't have an account? <a href="#">Sign up</a></p>
      <p class="error-msg" id="errorMsg"></p>
  </div>
</div>

<!-- Customer Menu Page -->
<div class="container" id="menuPage">
  <h2>Digital Food Menu</h2>
  <div class="filter-buttons">
    <button id="showVeg">Veg</button>
    <button id="showNonVeg">Non-Veg</button>
    <button id="showDrinks">Drinks</button>
    <button id="showAll">All</button>
  </div>
  <div class="menu-container" id="menuItems"></div>
  <button onclick="logout()">Logout</button>
</div>

<!-- Admin Dashboard -->
<div class="container" id="adminDashboard">
  <h2>Admin Dashboard</h2>
  <table>
    <thead>
      <tr><th>Customer Details</th><th>Password</th></tr>
    </thead>
    <tbody id="customerList"></tbody>
  </table>
  <button onclick="logout()">Logout</button>
</div>

<!-- EmailJS and App Script -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function() {
    emailjs.init("YOUR_PUBLIC_KEY"); // Replace with your EmailJS Public Key
})();

const customerBtn=document.getElementById('customerBtn');
const adminBtn=document.getElementById('adminBtn');
const loginTypeBox=document.getElementById('loginTypeBox');
const loginPage=document.getElementById('loginPage');
const adminDashboard=document.getElementById('adminDashboard');
const menuPage=document.getElementById('menuPage');
const loginBtn=document.getElementById('loginBtn');
const toggleSignup=document.getElementById('toggleSignup');
const errorMsg=document.getElementById('errorMsg');
const loginTitle=document.getElementById('loginTitle');
const otpField=document.getElementById('otpField');

let loginType='';
let customers=JSON.parse(localStorage.getItem('customers'))||[];
const adminUser={username:'admin@gmail.com',password:'12345'};

customerBtn.onclick=()=>{loginType='customer';loginTypeBox.style.display='none';loginPage.style.display='block';};
adminBtn.onclick=()=>{loginType='admin';loginTypeBox.style.display='none';loginPage.style.display='block';};

let isSignup=false,isVerifyingOTP=false,generatedOTP=null,pendingUser=null;

toggleSignup.addEventListener('click',(e)=>{
  e.preventDefault();
  isSignup=!isSignup;
  isVerifyingOTP=false;
  otpField.style.display='none';
  errorMsg.textContent='';

  if(isSignup){
    loginTitle.textContent='Customer Sign Up';
    loginBtn.textContent='Register';
    toggleSignup.innerHTML='Already have an account? <a href="#">Login</a>';
    nameField.style.display='block';
    phoneField.style.display='block';
  }else{
    loginTitle.textContent='Customer Login';
    loginBtn.textContent='Login';
    toggleSignup.innerHTML='Don\'t have an account? <a href="#">Sign up</a>';
    nameField.style.display='none';
    phoneField.style.display='none';
  }
});

async function sendOTP(email, otp) {
    try {
        await emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
            to_email: email,
            from_name: "Digital Food Menu System",
            otp: otp
        });
        return true;
    } catch (error) {
        console.error("EmailJS Error:", error);
        alert("Failed to send OTP. Check EmailJS config.");
        return false;
    }
}

loginBtn.addEventListener('click', async ()=>{
  const fullname=document.getElementById('fullname').value.trim();
  const email=document.getElementById('email').value.trim();
  const phone=document.getElementById('phone').value.trim();
  const password=document.getElementById('password').value.trim();
  const otpInput=document.getElementById('otpInput').value.trim();

  if(isVerifyingOTP){
      if(otpInput===generatedOTP){
          customers.push(pendingUser);
          localStorage.setItem('customers',JSON.stringify(customers));
          errorMsg.style.color='#00ff00';
          errorMsg.textContent='✅ Registration successful!';
          setTimeout(()=>{
              isVerifyingOTP=false;
              otpField.style.display='none';
              loginBtn.textContent='Login';
              loginTitle.textContent='Customer Login';
              isSignup=false;
              toggleSignup.innerHTML='Don\'t have an account? <a href="#">Sign up</a>';
              errorMsg.textContent='';
          },1500);
      }else{
          errorMsg.style.color='red';
          errorMsg.textContent='❌ Incorrect OTP. Try again.';
      }
      return;
  }

  if(!email||!password||(isSignup && (!fullname||!phone))){
      errorMsg.textContent='Please fill all required fields';
      return;
  }

  if(loginType==='customer'){
      if(isSignup){
          if(customers.find(c=>c.email===email)){
              errorMsg.textContent='Email already registered';
              return;
          }
          generatedOTP=Math.floor(100000+Math.random()*900000).toString();
          const sent = await sendOTP(email, generatedOTP);
          if(sent){
              errorMsg.style.color='#00ff00';
              errorMsg.textContent='✅ OTP sent to your email.';
              pendingUser={fullname,email,phone,password};
              isVerifyingOTP=true;
              otpField.style.display='block';
              loginBtn.textContent='Verify OTP';
          } else {
              errorMsg.style.color='red';
              errorMsg.textContent='❌ Failed to send OTP. Try again.';
          }
      }else{
          const user=customers.find(c=>c.email===email && c.password===password);
          if(user){
              loginPage.style.display='none';
              menuPage.style.display='block';
              renderMenu(foodItems);
          }else{
              errorMsg.textContent='Invalid email or password';
          }
      }
  }else if(loginType==='admin'){
      if(email===adminUser.username && password===adminUser.password){
          loginPage.style.display='none';
          adminDashboard.style.display='block';
          showCustomerList();
      }else{
          errorMsg.textContent='Invalid admin credentials';
      }
  }
});

function showCustomerList(){
  const tbody=document.getElementById('customerList');
  tbody.innerHTML='';
  if(customers.length===0){
      tbody.innerHTML='<tr><td colspan="2">No registered customers</td></tr>';
  }else{
      customers.forEach(c=>{
          const tr=document.createElement('tr');
          tr.innerHTML=`<td>${c.fullname}<br>${c.email}<br>${c.phone}</td><td>${c.password}</td>`;
          tbody.appendChild(tr);
      });
  }
}

// Food Items
const foodItems=[
  {name:'Paneer Butter Masala',type:'veg',img:'https://cdn.pixabay.com/photo/2020/08/02/06/07/indian-food-5451441_1280.jpg'},
  {name:'Veg Biryani',type:'veg',img:'https://cdn.pixabay.com/photo/2017/12/09/08/18/biryani-3009795_1280.jpg'},
  {name:'Dal Tadka',type:'veg',img:'https://cdn.pixabay.com/photo/2021/04/29/16/24/dal-6217265_1280.jpg'},
  {name:'Chicken Biryani',type:'nonveg',img:'https://cdn.pixabay.com/photo/2020/03/31/16/15/biryani-4982489_1280.jpg'},
  {name:'Grilled Fish',type:'nonveg',img:'https://cdn.pixabay.com/photo/2016/03/05/19/02/fish-1238395_1280.jpg'},
  {name:'Mutton Curry',type:'nonveg',img:'https://cdn.pixabay.com/photo/2020/07/28/18/34/indian-food-5449619_1280.jpg'},
  {name:'Cold Coffee',type:'drinks',img:'https://cdn.pixabay.com/photo/2017/07/16/10/43/coffee-2503489_1280.jpg'},
  {name:'Mango Shake',type:'drinks',img:'https://cdn.pixabay.com/photo/2017/05/07/08/56/mango-2291179_1280.jpg'},
  {name:'Coca Cola',type:'drinks',img:'https://cdn.pixabay.com/photo/2017/01/03/17/30/coca-cola-1957499_1280.jpg'},
  {name:'Veg Pizza',type:'veg',img:'https://cdn.pixabay.com/photo/2017/12/09/08/18/pizza-3007395_1280.jpg'},
  {name:'Chicken Wings',type:'nonveg',img:'https://cdn.pixabay.com/photo/2018/08/31/12/24/chicken-wings-3641953_1280.jpg'},
  {name:'Lemon Soda',type:'drinks',img:'https://cdn.pixabay.com/photo/2016/02/19/11/53/lemonade-1209198_1280.jpg'}
];

function renderMenu(items){
  const container=document.getElementById('menuItems');
  container.innerHTML='';
  items.forEach(i=>{
      const card=document.createElement('div');
      card.className='card';
      card.innerHTML=`<img src="${i.img}" alt="${i.name}"><h4>${i.name}</h4><p>${i.type.toUpperCase()}</p>`;
      container.appendChild(card);
  });
}

// Filter Buttons
document.getElementById('showVeg').onclick=()=>renderMenu(foodItems.filter(i=>i.type==='veg'));
document.getElementById('showNonVeg').onclick=()=>renderMenu(foodItems.filter(i=>i.type==='nonveg'));
document.getElementById('showDrinks').onclick=()=>renderMenu(foodItems.filter(i=>i.type==='drinks'));
document.getElementById('showAll').onclick=()=>renderMenu(foodItems);

function logout(){
  loginTypeBox.style.display='block';
  loginPage.style.display='none';
  menuPage.style.display='none';
  adminDashboard.style.display='none';
}
</script>
</body>
</html>
